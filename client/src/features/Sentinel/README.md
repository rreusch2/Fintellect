# Sentinel UI Enhancement Guide

This guide explains the enhanced UI components for the Sentinel AI Research feature.

## UI Components Overview

### 1. Research Display

The main component that combines the agent activity feed and tools panel. It provides:

- A two-pane layout showing agent activity on the left and tools on the right
- The ability to toggle the visibility of the right pane
- Switching between terminal output and browser view in the right pane

### 2. Agent Activity Feed

Shows the agent's progress, completed steps, and generated files. Features:

- A progress bar showing the current research phase
- A list of completed steps with descriptions
- Buttons to download files generated by the agent
- Real-time activity logs from the agent
- A prompt input for interacting with the agent

### 3. Terminal Output

Shows the terminal commands and output from the agent. Features:

- Special formatting for commands and their outputs
- Color-coded output for better readability
- A command input for sending shell commands
- Connection status indicator

### 4. Browser View 

Shows the browser state when the agent is using the browser. Features:

- Screenshots of the browser
- Current browser state information
- Loading indicators

### 5. File Viewer

A modal component for previewing file contents. Features:

- Syntax highlighting based on file type
- Specialized rendering for different file types (JSON, CSV, etc.)
- Download button for saving the file locally
- Visual indicators for binary files

## Message Types

The UI handles several WebSocket message types:

1. `terminal_command` - Terminal commands executed by the agent
2. `workspace_files` - Files detected in the agent's workspace
3. `agent_progress` - Progress updates from the agent
4. `file_content` - File contents for viewing or downloading
5. `browser_state` - Browser screenshots and state information

## Using the UI

### Viewing Agent Progress

The agent's progress is shown on the left side with a progress bar and step list. The current focus area is displayed to give context about what the agent is working on.

### Interacting with the Agent

You can:
- Use the prompt input at the bottom of the agent activity feed to ask questions or give instructions
- Use the command input at the bottom of the terminal view to execute shell commands
- Toggle between terminal and browser views using the tabs in the right pane
- Collapse the right pane to focus on the agent's activity

### Working with Files

When the agent generates files:
1. They appear as buttons in the "Generated Files" section of the agent activity feed
2. Click a file button to view its contents
3. In the file viewer, you can download the file to your local machine
4. For binary files, content will be displayed as a placeholder message

## Implementation Details

The UI enhancements are built using React with TypeScript and use Shadcn UI components. They connect to the backend via WebSockets to receive real-time updates from the agent.

### Key Props and Interfaces

#### AgentProgress
```typescript
interface AgentProgress {
  step: string;                // Current phase (initialization, data_collection, analysis, etc.)
  progress: number;            // Progress percentage (0-100)
  steps_completed: Array<{     // Steps that have been completed
    name: string;              // Step name
    description: string;       // Step description
    timestamp: string;         // When the step was completed
  }>;
  current_focus: string;       // What the agent is currently working on
  output_files: Array<{        // Files generated by the agent
    name: string;              // File name
    type: string;              // File extension
    timestamp: string;         // When the file was created
  }>;
}
```

#### LogLine
```typescript
interface LogLine {
  type: string;                // Log type (agent_status, terminal_command, etc.)
  data?: string;               // Log content for standard types
  command?: string;            // Command for terminal_command type
  output?: string;             // Output for terminal_command type
  agentId: string | null;      // Associated agent ID
  timestamp?: string;          // Log timestamp
}
```

## Customization

### Theme

The UI uses a dark theme with indigo accents. To customize:

- Edit the color classes in the component files
- Update the gradient backgrounds in Card components
- Modify the progress bar colors in AgentActivityFeed

### Layout

The two-pane layout can be adjusted:
- Change the grid layout in ResearchDisplay
- Modify the Card heights or flex properties
- Adjust padding and margins for different screen sizes 